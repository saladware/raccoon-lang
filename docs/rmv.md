
VM (Raccoon Virtual Machine)
---


***RVM*** - стековая виртуальная машина языка программирования Raccoon.
RVM является всего лишь одним из способов запуска кода на этом языке программирования.
RVM занимается интерпретацией байт-кода, который был получен из исходного кода на языке Raccoon,
после компиляции (трансляции) `.rn` файла.


## Байт-код

Каждая команда байт-кода может иметь свои аргументы. Аргументы команды байт-кода имеют формат `name:size`, 
где name - имя аргумента, а size - размер аргумента в байтах. Префикс `_` перед именем аргумента обозначает, что
этот аргумент не нужно передавать в языке ассемблера виртуальной машины, но этот аргумент попадёт в байт-код при 
компиляции ассемблерного кода.

| Команда | Код        | Описание                                                                           | Аргументы                     |
|---------|------------|------------------------------------------------------------------------------------|-------------------------------|
| `sload` | `00000000` | Загружает строку длинны `_length` на вершину стека                                 | `_length:8` `string:length`   |
| `iload` | `00000001` | Загружает целое число произвольного размера `_size` на вершину стека               | `_size:1` `number:_size`      |
| `abort` | `00000010` | Завершение работы виртуальной машины                                               | нет аргументов                |
| `debug` | `00000011` | Выводит на экран строковое представление объекта на вершине стека                  | нет аргументов                |
| `store` | `00000100` | Забирает объект с вершины стека и сохраняет под именем `name`                      | `_length:1` `name:length`     |
| `fun`   | `00000101` | Объявление начала функции                                                          | `_length:8` `name:_length`    |
| `end`   | `00000110` | Объявление конца функции                                                           | нет аргументов                |
| `add`   | `00000111` | Забирает поочерёдно с вершины с тека значения `b`, `a` и кладёт на вершину `a + b` | нет аргументов                |
| `sub`   | `00001000` | Забирает поочерёдно с вершины с тека значения `b`, `a` и кладёт на вершину `a - b` | нет аргументов                |
| `mul`   | `00001001` | Забирает поочерёдно с вершины с тека значения `b`, `a` и кладёт на вершину `a * b` | нет аргументов                |
| `div`   | `00001010` | Забирает поочерёдно с вершины с тека значения `b`, `a` и кладёт на вершину `a / b` | нет аргументов                |

### Ограничения виртуальной машины
- Идентификаторы должны иметь размер не более 255 байт
- Размер целочисленных значений не может превышать 255 байт
